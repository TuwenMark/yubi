"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{99943:function(Ze,I,r){r.r(I),r.d(I,{default:function(){return je}});var Y=r(13769),K=r.n(Y),k=r(5574),C=r.n(k),H=r(15009),u=r.n(H),J=r(97857),g=r.n(J),Q=r(99289),f=r.n(Q),Z=r(80854);function X(d,t){return F.apply(this,arguments)}function F(){return F=f()(u()().mark(function d(t,i){return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/rule",g()({method:"GET",params:g()({},t)},i||{})));case 1:case"end":return c.stop()}},d)})),F.apply(this,arguments)}function q(d){return P.apply(this,arguments)}function P(){return P=f()(u()().mark(function d(t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.request)("/api/rule",g()({method:"PUT"},t||{})));case 1:case"end":return a.stop()}},d)})),P.apply(this,arguments)}function _(d){return A.apply(this,arguments)}function A(){return A=f()(u()().mark(function d(t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.request)("/api/rule",g()({method:"POST"},t||{})));case 1:case"end":return a.stop()}},d)})),A.apply(this,arguments)}function ee(d){return $.apply(this,arguments)}function $(){return $=f()(u()().mark(function d(t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,Z.request)("/api/rule",g()({method:"DELETE"},t||{})));case 1:case"end":return a.stop()}},d)})),$.apply(this,arguments)}var re=r(51042),ne=r(66958),ae=r(95782),te=r(2236),ue=r(37476),O=r(5966),B=r(90672),se=r(1656),v=r(2453),le=r(96365),E=r(71577),ie=r(85265),j=r(67294),w=r(62113),b=r(64317),de=r(86615),oe=r(22452),ce=r(12767),n=r(85893),pe=function(t){return(0,n.jsxs)(w.L,{stepsProps:{size:"small"},stepsFormRender:function(a,c){return(0,n.jsx)(ce.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:t.updateModalOpen,footer:c,onCancel:function(){t.onCancel()},children:a})},onFinish:t.onSubmit,children:[(0,n.jsxs)(w.L.StepForm,{initialValues:{name:t.values.name,desc:t.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,n.jsx)(O.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,n.jsx)(B.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,n.jsxs)(w.L.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,n.jsx)(b.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,n.jsx)(b.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,n.jsx)(de.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,n.jsxs)(w.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,n.jsx)(oe.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,n.jsx)(b.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},fe=pe,me=["defaultRender"],he=function(){var d=f()(u()().mark(function t(i){var a;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,_(g()({},i));case 4:return a(),v.ZP.success("Added successfully"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),a(),v.ZP.error("Adding failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},t,null,[[1,9]])}));return function(i){return d.apply(this,arguments)}}(),ve=function(){var d=f()(u()().mark(function t(i){var a;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.ZP.loading("Configuring"),e.prev=1,e.next=4,q({name:i.name,desc:i.desc,key:i.key});case 4:return a(),v.ZP.success("Configuration is successful"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),a(),v.ZP.error("Configuration failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},t,null,[[1,9]])}));return function(i){return d.apply(this,arguments)}}(),ge=function(){var d=f()(u()().mark(function t(i){var a;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=v.ZP.loading("\u6B63\u5728\u5220\u9664"),i){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,ee({key:i.map(function(T){return T.key})});case 6:return a(),v.ZP.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),a(),v.ZP.error("Delete failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,null,[[3,11]])}));return function(i){return d.apply(this,arguments)}}(),ye=function(){var t=(0,j.useState)(!1),i=C()(t,2),a=i[0],c=i[1],e=(0,j.useState)(!1),T=C()(e,2),Se=T[0],D=T[1],xe=(0,j.useState)(!1),L=C()(xe,2),M=L[0],U=L[1],S=(0,j.useRef)(),Ce=(0,j.useState)(),G=C()(Ce,2),m=G[0],R=G[1],Re=(0,j.useState)([]),V=C()(Re,2),x=V[0],W=V[1],z=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"name",tip:"The rule name is the unique key",render:function(s,l){return(0,n.jsx)("a",{onClick:function(){R(l),U(!0)},children:s})}},{title:"\u63CF\u8FF0",dataIndex:"desc",valueType:"textarea"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(s){return"".concat(s,"\u4E07")}},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"},3:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u4E0A\u6B21\u8C03\u5EA6\u65F6\u95F4",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(s,l,h){var y=l.defaultRender,p=K()(l,me),N=h.getFieldValue("status");return"".concat(N)==="0"?!1:"".concat(N)==="3"?(0,n.jsx)(le.Z,g()(g()({},p),{},{placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u539F\u56E0\uFF01"})):y(s)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(s,l){return[(0,n.jsx)("a",{onClick:function(){D(!0),R(l)},children:"\u914D\u7F6E"},"config"),(0,n.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,n.jsxs)(ne._z,{children:[(0,n.jsx)(ae.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:S,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,n.jsxs)(E.ZP,{type:"primary",onClick:function(){c(!0)},children:[(0,n.jsx)(re.Z,{})," \u65B0\u5EFA"]},"primary")]},request:X,columns:z,rowSelection:{onChange:function(s,l){W(l)}}}),(x==null?void 0:x.length)>0&&(0,n.jsxs)(te.S,{extra:(0,n.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,n.jsx)("a",{style:{fontWeight:600},children:x.length})," ","\u9879 \xA0\xA0",(0,n.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",x.reduce(function(o,s){return o+s.callNo},0)," \u4E07"]})]}),children:[(0,n.jsx)(E.ZP,{onClick:f()(u()().mark(function o(){var s,l;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,ge(x);case 2:W([]),(s=S.current)===null||s===void 0||(l=s.reloadAndRest)===null||l===void 0||l.call(s);case 4:case"end":return y.stop()}},o)})),children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(E.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,n.jsxs)(ue.Y,{title:"\u65B0\u5EFA\u89C4\u5219",width:"400px",open:a,onOpenChange:c,onFinish:function(){var o=f()(u()().mark(function s(l){var h;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,he(l);case 2:h=p.sent,h&&(c(!1),S.current&&S.current.reload());case 4:case"end":return p.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),children:[(0,n.jsx)(O.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"name"}),(0,n.jsx)(B.Z,{width:"md",name:"desc"})]}),(0,n.jsx)(fe,{onSubmit:function(){var o=f()(u()().mark(function s(l){var h;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,ve(l);case 2:h=p.sent,h&&(D(!1),R(void 0),S.current&&S.current.reload());case 4:case"end":return p.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),onCancel:function(){D(!1),M||R(void 0)},updateModalOpen:Se,values:m||{}}),(0,n.jsx)(ie.Z,{width:600,open:M,onClose:function(){R(void 0),U(!1)},closable:!1,children:(m==null?void 0:m.name)&&(0,n.jsx)(se.vY,{column:2,title:m==null?void 0:m.name,request:f()(u()().mark(function o(){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{data:m||{}});case 1:case"end":return l.stop()}},o)})),params:{id:m==null?void 0:m.name},columns:z})})]})},je=ye}}]);
